// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: MarkQueueFailed.sql

package DAL

import (
	"context"
	"database/sql"
	"time"
)

const markQueueFailed = `-- name: MarkQueueFailed :exec
UPDATE crawl_queue
SET status      = 'failed',
    attempts    = attempts + 1,
    last_error  = $2,
    next_run_at = $3,
    locked_at   = NULL,
    updated_at  = now()
WHERE url = $1
`

type MarkQueueFailedParams struct {
	Url       string
	LastError sql.NullString
	NextRunAt time.Time
}

func (q *Queries) MarkQueueFailed(ctx context.Context, arg MarkQueueFailedParams) error {
	_, err := q.db.ExecContext(ctx, markQueueFailed, arg.Url, arg.LastError, arg.NextRunAt)
	return err
}
